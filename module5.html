<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>住住-驻拽 -  5:  -驻专专</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" xintegrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" xintegrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js" xintegrity="sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmUbKyJjd8" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" xintegrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Assistant:wght@300;400;600;700&display=swap');
        body {
            font-family: 'Assistant', sans-serif;
            scroll-behavior: smooth;
            background-color: #111827;
            color: #d1d5db;
        }
        .katex { font-size: 1.1em; }
        .feedback {
            transition: all 0.3s ease-in-out;
            max-height: 0;
            overflow: hidden;
            opacity: 0;
            padding: 0 1rem;
        }
        .feedback.show {
             max-height: 500px;
             opacity: 1;
             margin-top: 1rem;
             padding: 0.75rem 1rem;
        }
        .feedback.correct {
            border-right: 4px solid #22c55e;
            background-color: rgba(34, 197, 94, 0.1);
        }
        .feedback.incorrect {
            border-right: 4px solid #ef4444;
            background-color: rgba(239, 68, 68, 0.1);
        }
        .pro-tip {
            background-color: rgba(250, 204, 21, 0.1);
            border-right: 4px solid #facc15;
            padding: 1rem;
            border-radius: 0.5rem;
            margin: 1rem 0;
        }
        .pro-tip::before {
            content: " 驻 砖 驻";
            font-weight: bold;
            display: block;
            margin-bottom: 0.5rem;
            color: #facc15;
        }
        .practice-question {
            background-color: #1f2937;
            border-radius: 0.5rem;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }
        .spss-output {
            background-color: #f0f4f8;
            color: #333;
            font-family: 'Courier New', Courier, monospace;
            padding: 1rem;
            border-radius: 0.5rem;
            border: 1px solid #ccc;
            white-space: pre-wrap;
            overflow-x: auto;
            direction: ltr;
        }
        .interactive-table input {
            background-color: #374151;
            border: 1px solid #4b5563;
            border-radius: 0.25rem;
            text-align: center;
            width: 60px;
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-200">

    <!-- Header -->
    <header class="bg-gray-800 shadow-lg sticky top-0 z-50">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <h1 class="text-2xl md:text-3xl font-bold text-rose-400">
                <i class="fas fa-not-equal mr-2"></i> 5:  -驻专专
            </h1>
            <a href="#" class="text-gray-300 hover:text-rose-400 transition">
                <i class="fas fa-home ml-1"></i> 专 转驻专 专砖
            </a>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto p-4 md:p-8">

        <section class="text-center mb-12">
            <h2 class="text-4xl md:text-5xl font-extrabold mb-2 bg-clip-text text-transparent bg-gradient-to-r from-rose-400 to-fuchsia-500">砖  专</h2>
            <p class="text-lg text-gray-400">专 专  住住 砖 爪 砖 转  拽住  转拽转.</p>
        </section>

        <!-- Section 5.1: Why Non-Parametric? -->
        <section class="mb-12">
            <h3 class="text-3xl font-bold mb-6 border-b-2 border-gray-700 pb-2">5.1:   爪专  -驻专专?</h3>
            <div class="bg-gray-800 rounded-lg p-6">
                <p class="mb-4">注 注砖, 专  砖 (  t)  **驻专专**.   转 拽转  住, 注拽专 砖转 转驻 专转.   拽专 砖转   转拽转?</p>
                <ul class="list-disc list-inside space-y-2">
                    <li>砖 砖 **拽 **   住  专转.</li>
                    <li>砖转 砖  **专** (住 住专), 专 专 砖  砖注转 爪注.</li>
                    <li>砖转 砖  **砖** (拽专转),  注驻转  住.</li>
                </ul>
                <p class="mt-4">拽专 , 砖转砖  **-驻专专**.   住转 注 驻专专 砖 住 ( `渭` -``),  注 注 **砖转**  **专**,   "驻砖 转" (Distribution-Free).</p>
            </div>
        </section>

        <!-- Section 5.2: Chi-Square Tests -->
        <section class="mb-12">
            <h3 class="text-3xl font-bold mb-6 border-b-2 border-gray-700 pb-2">5.2: 砖驻转  -专注 (`虏`)</h3>
            <div class="bg-gray-800 rounded-lg p-6 mb-6">
                <h4 class="text-2xl font-bold mb-4"> `虏`  转</h4>
                <p class="mb-4">  拽  转驻转 砖转  砖 转转 转驻转 转专转 砖 爪驻 . `H_0` 转 注转 砖转驻转 转转 爪驻.</p>
                <div class="bg-gray-900 p-4 rounded-lg mt-6">
                    <h5 class="font-bold mb-4 text-xl">驻注转:  拽 转?</h5>
                    <p class="mb-4"> 拽 60 驻注 拽 转 转爪转 转.  拽 转,  爪驻 拽  转爪 10 驻注.  转爪转 砖 住转 驻 拽 爪驻?</p>
                    <table class="w-full text-center interactive-table">
                        <thead><tr><th>转爪</th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th></tr></thead>
                        <tbody>
                            <tr><td>砖转 爪驻转 (O)</td>
                                <td><input id="gof-o1" type="number" value="8"></td>
                                <td><input id="gof-o2" type="number" value="12"></td>
                                <td><input id="gof-o3" type="number" value="11"></td>
                                <td><input id="gof-o4" type="number" value="9"></td>
                                <td><input id="gof-o5" type="number" value="7"></td>
                                <td><input id="gof-o6" type="number" value="13"></td>
                            </tr>
                             <tr><td>砖转 爪驻 (E)</td>
                                <td><input id="gof-e1" type="number" value="10"></td>
                                <td><input id="gof-e2" type="number" value="10"></td>
                                <td><input id="gof-e3" type="number" value="10"></td>
                                <td><input id="gof-e4" type="number" value="10"></td>
                                <td><input id="gof-e5" type="number" value="10"></td>
                                <td><input id="gof-e6" type="number" value="10"></td>
                            </tr>
                        </tbody>
                    </table>
                    <button id="gof-calc-btn" class="mt-4 w-full bg-rose-600 hover:bg-rose-700 text-white font-bold py-2 px-4 rounded transition">砖 `虏`</button>
                    <div id="feedback-gof" class="mt-4 p-3 rounded-lg feedback"></div>
                </div>
            </div>
            <div class="bg-gray-800 rounded-lg p-6">
                <h4 class="text-2xl font-bold mb-4"> `虏` -转转</h4>
                <p class="mb-4">  拽  拽 拽砖专 住住  砖 砖转 砖. `H_0` 转 注转 砖 拽砖专  砖转 ( 转 转).</p>
                <div class="bg-gray-900 p-4 rounded-lg mt-6">
                    <h5 class="font-bold mb-4 text-xl">驻注转:  砖 拽砖专  专 注驻转 拽驻?</h5>
                    <p class="mb-4">住拽专 砖 专 砖   注驻 拽驻 砖专  驻.</p>
                    <table class="w-full text-center interactive-table">
                         <thead><tr><th></th><th>拽驻 砖专</th><th>拽驻 驻</th></tr></thead>
                         <tbody>
                            <tr><td>专</td><td><input id="ind-a" type="number" value="30"></td><td><input id="ind-b" type="number" value="20"></td></tr>
                            <tr><td>砖</td><td><input id="ind-c" type="number" value="15"></td><td><input id="ind-d" type="number" value="35"></td></tr>
                         </tbody>
                    </table>
                    <button id="ind-calc-btn" class="mt-4 w-full bg-rose-600 hover:bg-rose-700 text-white font-bold py-2 px-4 rounded transition">砖 `虏`</button>
                    <div id="feedback-ind" class="mt-4 p-3 rounded-lg feedback"></div>
                </div>
            </div>
        </section>

        <!-- Section 5.3: Rank-Based Tests -->
        <section class="mb-12">
            <h3 class="text-3xl font-bold mb-6 border-b-2 border-gray-700 pb-2">5.3:  住住 专 (驻转  t)</h3>
            <div class="bg-gray-800 rounded-lg p-6 mb-6">
                <h4 class="text-2xl font-bold mb-4"> 拽拽住  转 转 (Mann-Whitney U)</h4>
                <p class="mb-4"> 驻 -驻专专转  t  转 转. 砖转砖   砖转 砖转 拽爪转 驻专转 砖转  专  砖转 专转 驻专转.</p>
                <div class="pro-tip">
                    专注 专:     拽爪转, 专   转驻专 驻 砖 .  拽爪 转 注驻, 专 专  转专 .
                </div>
            </div>
            <div class="bg-gray-800 rounded-lg p-6">
                <h4 class="text-2xl font-bold mb-4"> 拽拽住  </h4>
                <p class="mb-4">驻 -驻专专转  t  . 砖转砖  砖转 砖转 转 注 转 拽 (砖, 驻 专 驻) 砖转 专转 砖 驻专砖 驻专转.</p>
                 <div class="bg-gray-900 p-4 rounded-lg mt-6">
                    <h5 class="font-bold mb-4 text-xl">驻注转: 砖祝 专</h5>
                    <p>拽  注 6 砖.  驻专砖 砖拽 (驻-专): `+5, -2, +3, +3, 0, -8`</p>
                    <p class="mt-2">专 转 注专  砖 驻专砖 (转注 -0) 砖 转 `W+` (住 专 砖 驻专砖 ).</p>
                    <div class="flex items-center gap-2 mt-2">
                        <input id="wilcoxon-wplus" type="number" class="w-24 bg-gray-700 rounded p-1 text-center" placeholder="W+">
                        <button id="wilcoxon-check-btn" class="bg-rose-600 hover:bg-rose-700 px-3 py-1 rounded">拽</button>
                    </div>
                    <div id="feedback-wilcoxon" class="mt-4 p-3 rounded-lg feedback"></div>
                </div>
            </div>
        </section>

        <!-- Section 5.4: Practice Questions -->
        <section id="practice" class="mb-12">
            <h3 class="text-3xl font-bold mb-6 border-b-2 border-gray-700 pb-2">5.4: 转专 住</h3>
            <div id="practice-questions-container"></div>
        </section>

    </main>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const renderAllMath = () => {
                if (window.renderMathInElement) {
                    renderMathInElement(document.body, {
                        delimiters: [
                            {left: '$$', right: '$$', display: true},
                            {left: '`', right: '`', display: false},
                            {left: '$', right: '$', display: false},
                            {left: '\\(', right: '\\)', display: false},
                            {left: '\\[', right: '\\]', display: true}
                        ]
                    });
                }
            };
            
            const showFeedback = (elementId, message, isCorrect) => {
                const feedbackEl = document.getElementById(elementId);
                if (!feedbackEl) return;
                feedbackEl.innerHTML = message;
                feedbackEl.className = `p-3 rounded-lg feedback show ${isCorrect ? 'correct' : 'incorrect'}`;
                renderAllMath();
            };

            const setupChiSquareGOF = () => {
                document.getElementById('gof-calc-btn')?.addEventListener('click', () => {
                    let chiSquare = 0;
                    let df = -1;
                    let explanation = '砖 转专转  转 住住: `\\sum \\frac{(O-E)^2}{E}`<br><ul>';
                    for (let i = 1; i <= 6; i++) {
                        const o = parseFloat(document.getElementById(`gof-o${i}`).value);
                        const e = parseFloat(document.getElementById(`gof-e${i}`).value);
                        if (isNaN(o) || isNaN(e) || e <= 0) {
                            showFeedback('feedback-gof', '注专  拽.', false);
                            return;
                        }
                        const term = Math.pow(o - e, 2) / e;
                        chiSquare += term;
                        explanation += `<li>转 ${i}: \`\\frac{(${o} - ${e})^2}{${e}} = ${term.toFixed(3)}\`</li>`;
                        if (e > 0) df++;
                    }
                    explanation += '</ul>';
                    const critValue = 11.07; // for df=5, alpha=0.05
                    const conclusion = chiSquare < critValue
                        ? `  转 \`H_0\`.  住驻拽 专转 注 砖拽  转.`
                        : ` 转 \`H_0\`. 砖 专转  砖拽  转.`;

                    const message = `${explanation}住": \`\\chi^2 = ${chiSquare.toFixed(3)}\`.<br>专转 驻砖: \`df = ${df}\`.<br>注专 拽专 注专 \`\\alpha=0.05\`  \`\\chi^2_{crit} \\approx 11.07\`.<br><strong>住拽: ${conclusion}</strong>`;
                    showFeedback('feedback-gof', message, true);
                });
            };

            const setupChiSquareInd = () => {
                document.getElementById('ind-calc-btn')?.addEventListener('click', () => {
                    const a = parseFloat(document.getElementById('ind-a').value);
                    const b = parseFloat(document.getElementById('ind-b').value);
                    const c = parseFloat(document.getElementById('ind-c').value);
                    const d = parseFloat(document.getElementById('ind-d').value);

                    if (isNaN(a) || isNaN(b) || isNaN(c) || isNaN(d)) {
                        showFeedback('feedback-ind', '注专  拽.', false); return;
                    }

                    const row1 = a + b;
                    const row2 = c + d;
                    const col1 = a + c;
                    const col2 = b + d;
                    const total = a + b + c + d;

                    const e_a = (row1 * col1) / total;
                    const e_b = (row1 * col2) / total;
                    const e_c = (row2 * col1) / total;
                    const e_d = (row2 * col2) / total;

                    const chiSquare = Math.pow(a - e_a, 2) / e_a + Math.pow(b - e_b, 2) / e_b + Math.pow(c - e_c, 2) / e_c + Math.pow(d - e_d, 2) / e_d;
                    const df = 1;
                    const critValue = 3.841; // for df=1, alpha=0.05
                    const conclusion = chiSquare > critValue ? ' 转 `H_0` 住拽 砖砖 拽砖专 拽.' : '  转 `H_0`.  注转 拽砖专.';
                    
                    const message = `
                        砖转 爪驻转 : E(专, 砖专)=${e_a.toFixed(2)}, E(专, 驻)=${e_b.toFixed(2)}, E(砖, 砖专)=${e_c.toFixed(2)}, E(砖, 驻)=${e_d.toFixed(2)}.<br>
                        注专 住住: \`\\chi^2 = ${chiSquare.toFixed(3)}\`.<br>
                        专转 驻砖: \`df = (2-1)(2-1) = 1\`.<br>
                        注专 拽专 注专 \`\\alpha=0.05\`  \`\\chi^2_{crit} \\approx 3.841\`.<br>
                        <strong>住拽: ${conclusion}</strong>
                    `;
                    showFeedback('feedback-ind', message, true);
                });
            };
            
            const setupWilcoxonQuiz = () => {
                 document.getElementById('wilcoxon-check-btn')?.addEventListener('click', () => {
                    const wplus = parseInt(document.getElementById('wilcoxon-wplus').value);
                    const explanation = `
                        <p>驻专砖 ( 0) : \`+5, -2, +3, +3, -8\`</p>
                        <p>注专 : \`5, 2, 3, 3, 8\`</p>
                        <p>专 ( ):</p>
                        <ul class="list-disc list-inside">
                            <li>\`2\` 拽 专 1</li>
                            <li>砖 注专 \`3\` 拽 转 专 2 -3,    拽 \`(2+3)/2 = 2.5\`</li>
                            <li>\`5\` 拽 专 4</li>
                            <li>\`8\` 拽 专 5</li>
                        </ul>
                        <p>驻专砖  拽专  \`+5\` (专 4) -\`+3\` (专 2.5) -\`+3\` (专 2.5).<br>, \`W+ = 4 + 2.5 + 2.5 = 9\`.</p>
                    `;
                     
                     if (wplus === 9) {
                         showFeedback('feedback-wilcoxon', `<i class="fas fa-check-circle mr-2"></i> ! 砖 拽.` + explanation, true);
                     } else {
                         showFeedback('feedback-wilcoxon', `<i class="fas fa-times-circle mr-2"></i> 拽.  注专 注 砖:` + explanation, false);
                     }
                });
            };

            const setupPracticeQuiz = () => {
                const container = document.getElementById('practice-questions-container');
                const questions = [
                    // Chi-Square Questions
                    {
                        type: 'radio',
                        question: "转 砖转砖  `\\chi^2`  转?",
                        options: [
                            " 砖转 爪注  砖转 拽爪转.",
                            " 拽  转驻转 砖转  转转 转驻转 爪驻.",
                            " 拽 拽砖专  砖 砖转 专爪驻.",
                            " 砖转 砖转 砖转."
                        ],
                        correct: 1,
                        explanation: " `\\chi^2`  转 砖  住驻专转 爪驻转 (Observed) 住驻专转 爪驻转 (Expected) 注 驻 住驻专 拽专转 砖 砖转 ."
                    },
                    {
                        type: 'text',
                        question: " `\\chi^2` -转转, 转 砖转   3x4.  专转 驻砖 (`df`)?",
                        correct: 6,
                        explanation: "专转 驻砖 砖转 驻 `(住驻专 砖专转 - 1) * (住驻专 注转 - 1)`. 拽专 , `(3-1) * (4-1) = 2 * 3 = 6`."
                    },
                    // Wilcoxon / Mann-Whitney U Questions
                    {
                        type: 'radio',
                        question: "拽专 专爪 砖转 转 专转 砖注转 专爪 (住 1-10)  砖转 拽爪转 驻 (`n_1=12, n_2=14`). 转  转驻 专转.   注 砖转砖?",
                        options: [
                            " t  转 转",
                            " 拽拽住  ",
                            " Mann-Whitney U",
                            " `\\chi^2` -转转"
                        ],
                        correct: 2,
                        explanation: "专 砖转 拽爪转 驻专转 (转 转转) 注 转 专 (专) 转 专转 驻专转.  拽专 拽住  Mann-Whitney U."
                    },
                    {
                        type: 'radio',
                        question: " 注拽专 专 专  拽拽住?",
                        options: [
                            "砖转 爪注",
                            "砖转 砖转",
                            "砖转 住 专  拽爪转",
                            "砖转 驻专驻专爪转"
                        ],
                        correct: 2,
                        explanation: "  专 转 注专 拽专 专,  拽  砖  拽 住 专  拽爪转."
                    },
                    // Special Tests Questions
                    {
                        type: 'radio',
                        question: "拽专 拽 50 转 砖 砖     注   拽 住.  专爪 拽  砖  砖注专 转  专 砖 转 转.   砖转砖?",
                        options: [
                            " `\\chi^2` -转转",
                            " 拽专",
                            " 住",
                            " t  "
                        ],
                        correct: 1,
                        explanation: "专 转  (注 砖) 砖转  (注/).  拽专 注 拽 爪 , 拽 砖   驻专驻专爪转  转."
                    }
                ];

                questions.forEach((q, index) => {
                    const qDiv = document.createElement('div');
                    qDiv.className = 'practice-question';
                    let optionsHtml = '';
                    if (q.type === 'radio') {
                        let radioButtonsHtml = '';
                        q.options.forEach((opt, i) => {
                            const optionId = `q${index}_opt${i}`;
                            const radioInput = `<input type="radio" id="${optionId}" name="q${index}" value="${i}">`;
                            const label = `<label for="${optionId}" class="ml-2">${opt}</label>`;
                            radioButtonsHtml += `<div>${radioInput}${label}</div>`;
                        });
                        optionsHtml = `<div class="space-y-2 mt-4">${radioButtonsHtml}</div>`;
                    } else {
                        optionsHtml = `<input type="text" id="q${index}_input" class="mt-4 w-full bg-gray-700 rounded p-2" placeholder="拽 转 转砖转 ">`;
                    }

                    qDiv.innerHTML = `
                        <p class="font-bold text-lg">砖 ${index + 1}:</p>
                        <p class="mt-2">${q.question}</p>
                        ${optionsHtml}
                        <button class="check-answer-btn mt-4 bg-rose-600 hover:bg-rose-700 text-white font-bold py-2 px-4 rounded" data-index="${index}">拽 转砖</button>
                        <div id="feedback-q${index}" class="mt-4 p-3 rounded-lg feedback"></div>
                    `;
                    container.appendChild(qDiv);
                });

                document.querySelectorAll('.check-answer-btn').forEach(btn => {
                    btn.addEventListener('click', e => {
                        const index = parseInt(e.target.dataset.index, 10);
                        const q = questions[index];
                        let isCorrect = false;
                        if (q.type === 'radio') {
                            const selected = document.querySelector(`input[name="q${index}"]:checked`);
                            if (selected && parseInt(selected.value, 10) === q.correct) {
                                isCorrect = true;
                            }
                        } else {
                            const input = document.getElementById(`q${index}_input`);
                            if (input.value.toLowerCase() == q.correct.toString().toLowerCase()) {
                                isCorrect = true;
                            }
                        }
                        
                        const message = isCorrect 
                            ? `<i class="fas fa-check-circle mr-2"></i><strong>!</strong><br>${q.explanation}`
                            : `<i class="fas fa-times-circle mr-2"></i><strong> 拽.</strong><br>${q.explanation}`;
                        
                        showFeedback(`feedback-q${index}`, message, isCorrect);
                    });
                });
            };
            
            // --- Call Initialization Functions ---
            setupChiSquareGOF();
            setupChiSquareInd();
            setupWilcoxonQuiz();
            setupPracticeQuiz();
            renderAllMath();
        });
    </script>
</body>
</html>
